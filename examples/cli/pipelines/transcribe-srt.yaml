# SRT Subtitle Transcription Pipeline
# Usage: remotemedia run transcribe-srt.yaml --input audio.wav -O subtitles.srt
#
# Outputs SRT format subtitles with timestamps:
#   1
#   00:00:01,000 --> 00:00:04,500
#   Hello, this is the first subtitle.
#
#   2
#   00:00:05,000 --> 00:00:08,200
#   And this is the second one.

name: transcribe-srt
version: "1.0"
description: Audio transcription to SRT subtitle format using Whisper

nodes:
  - id: input
    node_type: AudioInput
    config:
      sample_rate: 16000
      channels: 1
      format: f32

  - id: vad
    node_type: SileroVAD
    config:
      threshold: 0.5
      min_speech_duration_ms: 250
      min_silence_duration_ms: 100

  - id: whisper
    node_type: WhisperSTT
    executor: multiprocess
    config:
      model: base.en
      language: en
      task: transcribe

  - id: output
    node_type: SrtOutput
    config:
      # Include segment numbers (1, 2, 3, ...)
      include_numbers: true
      # Max characters per subtitle line (0 = no limit)
      max_line_length: 42

connections:
  - from: input
    to: vad
  - from: vad
    to: whisper
  - from: whisper
    to: output
