# Cargo configuration for voice-assistant

[env]
# CUDA 13 path (candle 0.9+ with cudarc 0.18+ supports CUDA 13)
CUDA_PATH = "C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v13.0"

# FFmpeg paths - use vendor directory from workspace root
# These prevent vcpkg from being used (which adds unwanted dependencies)
FFMPEG_INCLUDE_DIR = "C:/Users/mail/dev/personal/remotemedia-sdk/vendor/ffmpeg/include"
FFMPEG_LIB_DIR = "C:/Users/mail/dev/personal/remotemedia-sdk/vendor/ffmpeg/lib"
# Static linking mode for FFmpeg
FFMPEG_STATIC = "1"
# Disable vcpkg auto-detection
VCPKGRS_DYNAMIC = "0"
VCPKGRS_NO_FFMPEG = "1"

[build]
# Use all available CPU cores
jobs = -1
rustflags = ["-A", "missing_docs"]

[doc]
rustdocflags = ["-A", "missing_docs"]

# Windows: Use dynamic CRT to match ONNX Runtime (ort-sys)
# CFLAGS/CXXFLAGS ensure C/C++ dependencies (esaxx-rs) also use dynamic CRT
[target.x86_64-pc-windows-msvc]
rustflags = ["-A", "missing_docs", "-C", "target-feature=-crt-static"]

[target.x86_64-pc-windows-msvc.env]
CFLAGS = "/MD"
CXXFLAGS = "/MD"
