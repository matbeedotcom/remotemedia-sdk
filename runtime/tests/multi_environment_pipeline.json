{
  "version": "v1",
  "metadata": {
    "name": "Multi_Environment_Pipeline",
    "description": "Pipeline demonstrating all execution environments"
  },
  "nodes": [
    {
      "id": "browser-node",
      "node_type": "SimpleCalculator",
      "params": {
        "operation": "add"
      },
      "execution": {
        "placement": "browser",
        "reason": "Pure WASM, no special requirements"
      }
    },
    {
      "id": "wasi-node",
      "node_type": "FileProcessor",
      "params": {
        "input_file": "/data/input.txt"
      },
      "execution": {
        "placement": "wasi",
        "reason": "Needs WASI file I/O"
      }
    },
    {
      "id": "host-python-node",
      "node_type": "NumpyProcessor",
      "params": {
        "operation": "fft"
      },
      "execution": {
        "placement": "host",
        "reason": "Requires Python with numpy (C-extension)"
      }
    },
    {
      "id": "host-whisper-node",
      "node_type": "WhisperNode",
      "params": {
        "model": "base.en",
        "n_threads": 4
      },
      "execution": {
        "placement": "host",
        "reason": "Requires whisper.cpp native library"
      },
      "capabilities": {
        "memory_gb": 0.5,
        "cpu": {
          "cores": 4
        }
      }
    },
    {
      "id": "remote-gpu-node",
      "node_type": "LLMInference",
      "params": {
        "model": "llama-70b",
        "device": "cuda"
      },
      "execution": {
        "placement": "remote",
        "reason": "Requires GPU cluster"
      },
      "capabilities": {
        "gpu": {
          "type": "cuda",
          "min_memory_gb": 40.0,
          "required": true
        },
        "memory_gb": 80.0
      }
    },
    {
      "id": "prefer-browser-node",
      "node_type": "ImageResize",
      "params": {
        "width": 800,
        "height": 600
      },
      "execution": {
        "placement": "prefer_browser",
        "reason": "Can run in browser, but fall back if needed"
      }
    },
    {
      "id": "prefer-host-node",
      "node_type": "VideoTranscode",
      "params": {
        "codec": "h264",
        "n_threads": 8
      },
      "execution": {
        "placement": "prefer_host",
        "reason": "Compute-intensive, prefer native performance"
      },
      "capabilities": {
        "memory_gb": 2.0,
        "cpu": {
          "cores": 8
        }
      }
    }
  ],
  "connections": [
    {
      "from": "browser-node",
      "to": "wasi-node"
    },
    {
      "from": "wasi-node",
      "to": "host-python-node"
    },
    {
      "from": "host-python-node",
      "to": "host-whisper-node"
    },
    {
      "from": "host-whisper-node",
      "to": "remote-gpu-node"
    },
    {
      "from": "remote-gpu-node",
      "to": "prefer-browser-node"
    },
    {
      "from": "prefer-browser-node",
      "to": "prefer-host-node"
    }
  ]
}
